everybody wanted the atat from the Star Wars wow it's a really exciting toy or is it yeah his legs moving that and the 80s ones had guns that moved and lit up but you have to put your hand in to operate its head and yeah the legs move if you operate them with your hands wouldn't it be better if it walked along now I'm aware of a walking at a tea toy which was made by thinkway but this was quite a bit smaller and didn't really walk amazingly well mostly its feet are just sliding on the ground I suspect it had a similar mechanism to the 3D printed ones that have been going around and ultimately that's because licensed toys cost a lot to produce so cutting down on Motors and control Electronics is generally how things go in the toy industry otherwise the product ends up costing too much I've built quite a few four-legged walking robots in the past I spent years through multiple versions of robot dogs before I got to something that could move fast and was Dynamic but I actually started with bipedal robots like my the Star Wars gonk droid which walked Along on two legs at the time I thought if I can make something not too bad that walks on two legs and four legs should be easy but what I didn't consider was that the gong drop had big flat feet and typically robot dogs have much smaller pointy feet which is why it took me so very many versions to make a robot dog that walked well but I never went back to build a four-legged walking robot with big flat feet to see how easy that would be and the at 80 is a great robot to convert because it's got these great big flat feet with these stabilizing toes I'm going to use a very similar parallelogram leg mechanism to the gong Droid which had a gear reduction built into the leg I worked out the geometry for this in the gong Droid series which you can check out in my channel essentially though it's a motor with a Spur Gear Running on a large partial gear and as I demonstrated in the previous videos the large gear just needs to be the same radius as the top part of the parallelogram and then the gears track each other just fine instead of a DC motor this time I'm going to use some servos with a gear mounted on the servo horn just a quick ad for my 3D printing sponsor thanks to lol's bar for supporting my Channel with 3D printers having lots of printers really helps get the projects done in time obviously we have to make four of everything because it has four legs and in some cases that's actually more parts the legs themselves have four sections so we have to make 16 sticks to make our four parallelogram legs and here's one of the gears that goes on the servo right all my parts are printed so we're ready to do some assembly thanks to 3D fuel for the filament for this this is all pro pla plus so here are my gears for the servo there's a recess so that that gear can get really close to the servo body but obviously those little things sticking up are probably going to snap off it'll be okay though because the bulk of the gear is just fine the servo itself fits into a Servo bracket which is 3D printed and yes I remember to leave the hole for the cable to come out just on the end there so we can screw them in that bracket fits onto one of the pieces of the leg there and obviously there's a recess so that the gear can turn without binding on it the other side of the leg has that partial spur gear on and that binds nicely onto the gear that we've got so now we just need to install something on each end so that we've got our parallelogram I've got some three millimeter steel axles so now we can put together the parallelogram and now we've got a working mechanism with a motor in it so giving that Servo a signal on some power we can see that moves quite nicely and that Servo tracks the big gear perfectly just because the big gear is the same radius as the top part of the parallelogram so that's worked out well again really happy if how that's turned out there's hardly any slop in this as well so it's actually quite a rigid mechanism so with these stages stacked together there's going to be hardly any wobble in the legs so all we need to do now is build the top of the leg and then build four more of them and put it all together so here's one whole leg with its two stages so it can bend in the middle so that gives us quite a wide range of motion we've got a big enough stripe there to walk like an AT-AT and of course we can bend the leg as well to pick it up so if we Bend both Motors in the same direction then we can pick the leg up and that gives us enough ground clearance to take steps but before we put the rest of the parts for that together it's time for a quick ad from the video sponsor which is curiositystream curiosity stream offers many award-winning documentary series that you can't find anywhere else the content spans many factual topics including science technology engineering nature history food and lots lots more so there's something for everyone curiosity stream plan starts at just five dollars a month you can choose a monthly or annual plan and get access to thousands of hours of quality content and is available on multiple devices like your TV computer and also mobile devices so you can watch your favorite content on the go all content on curiosity stream is factual so there's a big focus on education whether it's science technology or history the documentaries are informative and engaging obviously I really like science and technology so I really like the series called Engineering in the future which covers the metaverse hyperloop technology space exploration flying cars but also includes a documentary about Timber skyscrapers go to curiositystream.com jamesbrussin or scan the QR code for unlimited access to the world's top documentaries and non-fiction series and for my fans use promo code James Bruton and you'll get 25 off so click the link below or go to curiositystream.com jamesbroughton and save 25 right now right time to get back to the attacks so I made the whole thing four times so we've got four legs each one has two servos so that's eight servos but then there's another four servos at the top and that's going to enable the robot to turn so we've got a plate that goes on the bottom and the top and I've just got some bolts which are put through there so we've got pivot Points and then we've got a Servo for each leg that runs on a larger gear on the top plate so that we can swing the legs outwards I thought it was a shame to tear the head and body off the original at A T so I'm printing a new one and this is printed on the lolsbot Tas long bed which has a really long bed for big parts so my proportions aren't quite the same as the original toy but I'm pretty happy with the way it's turned out and I think mechanically it's going to be pretty solid the headphones printing right now but we're going to put some Electronics in so as usual I've got an Arduino Mega that's more than enough to control those servos and it's got this piece of strip board with all these wires broken out of it with power and the signal distribution for the 12 servos it's got an RC receiver on it the orange thing on there that's because we're going to be using my universal remote I made which is a DSM remote so check that out and my channel right let's uh try and get all this wired up so we've got all those Electronics installed and the cables rooted as best possible and zip tied on and we've also got the head installed the Arduino lives in there and the main battery lives right at the back so I've just tied the controller to the servos for now so they all Bend in the same direction and you can see the whole thing goes up and down as it bends its legs as you'd expect and also quite helpfully it can stand on one leg so those stabilizing feet really help to keep it upright you wouldn't be able to do that with one of my open dog projects but it would just fall over in that direction but in order to take steps with one foot at a time what we actually need is it goes forwards is all of the other feet to slide back in a perfectly straight line now this is actually quite a complicated mechanism here to do that and we're going to do it properly so we're going to calculate some inverse kinematics I did a more in-depth video about this before where I builds a simple robot arm the calculations I did for this allow me to position the end of the arm into Cartesian coordinates that means up and down and left and right in straight lines the code running calculates the required joint angles for the two joints I use Pythagoras Theorem and trigonometry to work out the angles the at 80 is very similar if we consider the leg to be a triangle so first I worked out the angles from the required length of the leg which is easy because we know all three sides once this is done we can set the leg length and the code will work out the angles next we need to move the foot back and forth we can just imagine that the leg is a straight line since we can set its length already so we can imagine another right angle triangle where we give it the distance we want to move back and forth the height of the body and then use trigonometry to work out the shoulder angle and the new leg length we pass the new leg length onto the previous calculation and then the body will stay at the same height as the foot moves back and forth the only thing I didn't take into account properly was this piece of the leg here because these two joints don't meet so it's not a perfect triangle but I just ignored that and it works perfectly well so now we can actually move that body up and down as we did before but instead of just moving those servos directly coupled to the stick we're actually calculating trigonometry and working out the leg length and now I can pretty much slide backwards and forwards as well in a straight line so if you look at the cabinet behind me you'll find that body is tracking it at some point those servos do reach their end stops though and also the cheap hobby servos have quite low tolerance feedback pots in probably about 10 tolerance so that means you probably don't get a linear response out of them that along with the broken triangle at the knee means that we don't get a perfectly straight line in any direction but we've got enough that we can make it walk and the legs move backwards and forwards in pretty much a straight line so we can take steps so obviously I can move the feet independently and we can put a step sequencer together to make it take steps you can see the foot doesn't track the ground perfectly but it's good enough for our purposes there's one other issue we need to solve though if I move my hand along the table here so it tracks in a perfectly straight line You'll see that my arm gets longer in this position and it gets longer in this position as we move further away from the center but you'll also notice that my shoulder is moving a lot more than my elbow the elbow joint hardly ever moves and my shoulder makes most of the motion so if we were just to send the two servos of the leg to another position in a straight line like this then one has to move further than the other and if we just send them at the speed that the servos will go at which is their maximum speed then basically one is going to get there first the other one will catch up later and that means we won't be moving in a perfectly straight line anymore when I'm driving the joints manually effectively I'm scrolling through all the positions from A to B because I'm moving this thick quite slowly through all the positions over time and the math is being calculated 100 times a second to work out the joint angles and therefore the leg tracks in a straight line from point A to point B but if I was just to suddenly send a step from one position to the next then those two joints will move them maximum speed and one will get there faster than the other so what we need is something that will manually scroll through all the positions but do it automatically when we specify two points and to do that we can use the Arduino ramp Library the simplest demo for that is specifying two points and then opening a Serial plotter and seeing the interpolation between them which is a nice straight line instead of a square wave or a step that new interpolated value is fed into the inverse kinematics so all the way through that value changing over time recalculates the joint angles and our feet move in a straight line from position to position I'm also using motion filtering on my control sticks and on the servos themselves on the output so I made a video specifically about this you should check out where I made a robot head with really cheap servos and controlled it with an 8-bit Arduino and you can see the Motions are really smooth there as I move around and basically all I'm doing is taking a large percentage of the previous value in the loop and only a small percentage of the new ones so the values can't change too quick and we get this lovely deceleration on the moves so now if I switch a switch on the controller we've got a timed sequence running that lifts each foot in turn pretty much the way a dog walks if I push forward on one of my control sticks then it takes the multiple of that control stick and moves all of the feet backwards which are on the ground and the one forward which is off the ground and so it walks along pretty convincingly and pretty much how an AT-AT walks flicking another switch causes it to lift diagonal legs and if I turn one of the controllers that causes the legs to swing out at the appropriate time to make it turn the legs don't share a common pivot point and that pivot point isn't in the middle of the robot which means the feet should actually move position in and out as it rotates round but I didn't care about that and it's light enough it doesn't matter so it walks okay it's very wobbly side to side you'll notice though although that only happens when it walks forwards if I reverse things and walk backwards which I can do just by pulling the stick in the other direction then it's actually much more stable you'll notice his bottom is much more stable than the head was when it was walking the other way and that is because the head is making it front heavy already but when it pushes all its legs back apart from the one that's in the air that makes it even more front heavy I tried to add Mass to the back by putting a battery on the back outside the back and also having some nuts there to add some extra mass it's pretty hard to compensate for the 300 grams hanging so far out the front though [Music] foreign foreign [Music] that means at iet's will work if the Star Wars was real life you'd actually be able to send one into battle and it will walk along it's quite good to know that they're statically stable so it can take one leg off the ground and still stand there with it off the ground it doesn't need to put it down again to catch itself because we all know what happens when at 18s fall over I'm going to publish all the cannon go for this project so if you want to have a look at it or build your own you can and that's on GitHub it's totally open source so if you want to support me through patreon or YouTube channel membership then those links are in the description below and patrons and YouTube channel members can get access to all the videos up to a week early sneak peeks and pictures of what's coming up and Discord benefits.
